<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>

<h2>Welcome <span id="user"></span></h2>

<button onclick="goRepos()">View Repositories</button>

<script src="js/auth.js"></script>

<script>
  const params = new URLSearchParams(window.location.search);

  if (params.get("token")) {
    localStorage.setItem("jwt_token", params.get("token"));
    localStorage.setItem("github_user", params.get("user"));
    history.replaceState({}, "", "dashboard.html");
  }

  const token = localStorage.getItem("jwt_token");
  const user = localStorage.getItem("github_user");

  if (!token || !user) {
    window.location.href = "index.html";
  }

  document.getElementById("user").innerText = user;

  function goRepos() {
    window.location.href = "repo.html";
  }
</script>




</body>
</html>
